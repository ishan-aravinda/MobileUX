<!doctype html>
<html class="no-js" lang="">

<head>
    <meta charset="utf-8">
    <title>Book Tickets</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Include JQuery Mobile -->
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
    <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">

    <link rel="stylesheet" href="css/signin.css" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">


    <script src = "https://checkout.stripe.com/checkout.js" ></script>


</head>
<style>
    body {
        background-image: url("./images/bg.png ");
        background-repeat: no-repeat;
        background-size: cover;
        background-position: center center;
        background-attachment: fixed;
    }
    
    select {
        float: left !important;
    }
    
    .ui-select,
    .ui-btn {
        border: 0.25px solid white !important;
        background-color: transparent !important;
        color: white !important;
        text-shadow: none !important;
    }
    
    input[type=submit] {
        background-color: #ffa630;
        color: black;
    }
    
    .ui-page {
        background: transparent;
    }
    
    .ui-content {
        background: transparent;
    }
    
    .ui-field-contain,
    .ui-mobile fieldset.ui-field-contain {
        padding: 0px;
    }
    
    .ui-page-theme-b .ui-btn, html .ui-bar-b .ui-btn, html .ui-body-b .ui-btn, html body .ui-group-theme-b .ui-btn, html head+body .ui-btn.ui-btn-b, .ui-page-theme-b .ui-btn:visited, html .ui-bar-b .ui-btn:visited, html .ui-body-b .ui-btn:visited, html body .ui-group-theme-b .ui-btn:visited, html head+body .ui-btn.ui-btn-b:visited {
        border: 1px solid white !important;
    }

    body {
        background-image: url("./images/bg.png ");
        background-repeat: no-repeat;
        background-size: cover;
    }

    .form-control {
        border: 1px solid white !important;
        color: white; 
        background-color: transparent !important; 
        width: 100%; 
        margin: auto;
    }
</style>

<body>

    <div class="body" data-role="page">
        <div align="center" data-role="header">
            <div data-role="header">

                <div data-demo-html="true">
                    <a href="./HomePage.html"><img src="./images/logo.png" rel="external" alt="Treasure Train Logo" width="200" height="150" style="float:left;"></a>

                    <div data-role="navbar" data-grid="c">
                        <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
                            <li class="nav-item">
                                <a class="nav-link" href="./HomePage.html" rel="external">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="./aboutus.html" rel="external">About Us</a>
                            </li>
                            <li class="nav-item active">
                                <a class="nav-link" href="./booking.html" rel="external">Book Tickets</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="./login.html" rel="external">Play</a>
                            </li>
                        </ul>

                        <!-- <ul>
          <li><a href="./HomePage.html">Home</a></li>
          <li><a href="./booking.html" class="ui-btn-active">Book Tickets</a></li>
          <li><a href="./aboutus.html">About Us</a></li>
          <li><a href="./login.html">Play Game</a></li>
        </ul> -->
                    </div>
                </div>
                <!--/demo-html -->
            </div>
        </div>

        <div data-role="content" class="form">
            <br>
            <h2 class="h2-style">Book Ticket</h2>
            <form action="" id="bookingForm">
                <div class="ui-grid-b ui-responsive">
                    <div class="ui-block-a element">
                        <p style="float:left;">From</p><br />
                        <div class="ui-field-contain">
                            <select id="from" name="from" required>
                                <option value="London">London</option>
                                <option value="Birmingham">Birmingham</option>
                                <option value="Bristol">Bristol</option>
                                <option value="Canterbury">Canterbury</option>
                            </select>
                        </div>
                    </div>
                    <div class="ui-block-a element">
                        <p style="float:left;">To</p><br />
                        <div class="ui-field-contain">
                            <select id="to" name="to" required>
                                <option value="London">London</option>
                                <option value="Birmingham">Birmingham</option>
                                <option value="Bristol">Bristol</option>
                                <option value="Canterbury">Canterbury</option>
                            </select>
                        </div>
                    </div>
                    <div class="ui-block-a element">
                        <p style="float:left;">Date</p><br />
                        <div class="ui-bar" style="height:60px">
                            <input align="center" value="Date of Trip" type="date" name="date" id="date" style="height:60px;" required>
                        </div>
                    </div>

                    <div class="ui-block-a element" style="margin-top:20px">
                        <p style="float:left;">Class</p><br>
                        <div class="ui-field-contain">
                            <select id="classOfTicket" onchange="loadTicketClassPrice()" required>
                                <option value="" disabled selected>Class</option>                                                
                                <option value="100">First Class</option>
                                <option value="10">Second Class</option>
                                <option selected value="1">Third Class</option>
                            </select>
                        </div>
                    </div>
                    <div class="ui-block-a element">
                        <p style="float:left;">Number of Tickets</p><br />
                        <div class="ui-field-contain">
                            <select id="numOfTickets" onchange="loadTotalPrice()" required>
                                <option value="" disabled selected>Number of Tickets</option>                        
                                <option value="1" selected>01</option>
                                <option value="2">02</option>
                                <option value="3">03</option>
                                <option value="4">04</option>
                                <option value="5">05</option>
                                <option value="6">06</option>
                                <option value="7">07</option>
                                <option value="8">08</option>
                                <option value="9">09</option>
                                <option value="10">10</option>
                            </select>
                        </div>
                    </div>

                    <div class="ui-block-a element">
                        <p style="float:left;">Price Per Ticket</p><br />
                        <div class="ui-bar" style="height:60px">
                            <input data-role="none" type="email" class="form-control" name="price-per-ticket" id="price-per-ticket" value="1.0 USD" readonly>
                            <!-- <input type="text" name="price-per-ticket" id="price-per-ticket" value="1.0 USD" readonly> -->
                        </div>
                    </div>

                    <div class="ui-block-a element">
                        <p style="float:left;">Total Price</p><br />
                        <div class="ui-bar" style="height:60px">
                            <input data-role="none" type="email" class="form-control" name="price" id="price" value="1.0 USD" readonly>
                            <!--<input type="text" name="price" id="price" value="1.0 USD" readonly> -->
                        </div>
                    </div>

                </div>


                <br><br>

                <div align="center" style="margin-top:15px;">
<!--                    <button href="popupLogin" data-role="none" data-rel="popup" data-position-to="window" onclick="loadPopup()" class="btn btn-lg btn-primary btn-block" type="button" data-transition="pop" data-position-to="window"> Book Now </button>-->
                    <a href="#popupLogin" onclick="loadPopup()" data-rel="popup" data-position-to="window" class="btn btn-lg btn-primary btn-block" data-transition="pop" data-position-to="window">Book Now</a>

                    <div data-role="popup" id="popupLogin" data-theme="a" class="ui-corner-all">

                        <form>

                            <div style="padding:10px 20px;background-color: black;">

                                <h3>Confirm your Booking</h3>

                                <p id="confirmation-msg" > test </p>

                                <button id="customButton" type="submit" class="ui-btn ui-corner-all ui-shadow ui-btn-b ui-btn-icon-left ui-icon-check">Proceed to Payment</button>
                            </div>
                        </form>
                    </div>

                </div> <br>
                <br>
                <div align="centre" class="ui-block-b">
                          <center>
                    <!--        <a data-position-to="window" data-rel="popup" data-role="button" data-theme="a" href="#"-->
                    <!--                               id="submit_booking">Book Now</a>-->
                    <!--      </center>-->

                </div>



            </form>

        </div>

        <div class="footer1">
            <br>
            <p>About Us</p>
            <p>It is a startup that has a fun process to book tickets and visit places in London. Book tickets, Play Game, Review Places all in one platform.</p>
            <div class="div3">
                <a href="https://www.facebook.com/Train/">
                    <img src="images/facebook.JPG" height="30" width="30" style="margin-right:10px">
                </a>
                <a href="https://twitter.com/train?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor">
                    <img src="images/twitter.JPG" height="30" width="30" style="margin-right:10px">
                </a>
                <a href="https://in.linkedin.com/in/train-to-prosper-67a5a4111?trk=people-guest_people_search-card">
                    <img src="images/linkedin.JPG" height="30" width="30" style="margin-right:10px">
                </a>
                <a href="https://github.com/2016102/MobileUX/tree/ishan">
                    <img src="images/github.JPG" height="30" width="30" style="margin-right:10px">
                </a>
            </div>
            <br>
            <div id="div1">
                <a href="https://goo.gl/maps/Mg9jvXbMktWD1LVd7">
                    <img src="images/location.JPG" height="25" width="25">
                    <p>Galle Road Dehiwala</p>
                </a>
                <a href="tel:0094769675159">
                    <img src="images/phone.JPG" height="25" width="25">
                    <p>0094769675159</p>
                </a>
                <a href='mailto:treasuretrain@gmail.com'>
                    <img src="images/email.JPG" height="25" width="25">
                    <p>treasuretrain@gmail.com</p>
                </a>
            </div>
        </div>

        <div data-role="popup" id="popupDialog" data-overlay-theme="a" data-theme="c" style="max-width:400px;" class="ui-corner-all" data-dismissible="false">
            <div data-role="header" data-theme="a" class="ui-corner-top">
                <h1>Conferma</h1>
            </div>
            <div class="content-secondary">
                <div data-role="popup" id="popupDiv" class="ui-content" style="max-width: 340px;">
                    <span id="dialog_title_span">Thank You</span>
                    <p>
                        Booking details are correct ?
                    </p>
                    <a id="confirmButton" data-role="button" data-theme="b" data-icon="check" data-inline="true" href="Default.aspx" data-mini="true">DONE</a>
                </div>
            </div>
            <div data-role="popup" id="popupBasic">
                <p>This is a completely basic popup, no options set.</p>
            </div>
        </div>
        <script src="js/vendor/modernizr-3.7.1.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
        <script>
            window.jQuery || document.write('<script src="js/vendor/jquery-3.4.1.min.js"><\/script>')
        </script>
        <script src="js/plugins.js"></script>
        <script src="js/main.js"></script>

        <!-- Google Analytics: change UA-XXXXX-Y to be your site's ID. -->
        <script>
            window.ga = function() {
                ga.q.push(arguments)
            };
            ga.q = [];
            ga.l = +new Date;
            ga('create', 'UA-XXXXX-Y', 'auto');
            ga('set', 'transport', 'beacon');
            ga('send', 'pageview')


            function onSuccess() {
                setTimeout(function() {
                    $('#popupDiv').popup("open");
                }, 100);
            }

            function onFailure(error) {
                alert(error);
            }
            $(document).on('click', 'submit', function() {
                $('#popupDiv').popup();
                $('#popupDiv').popup('open');
            })
        </script>
        <script src="https://www.google-analytics.com/analytics.js" async></script>


        <!--            SCRIPT FOR STRIPE INTEGRATION -->

        <script type="text/javascript">
            jQuery(function($){
                var $form = $('#bookingForm');
                var handler = StripeCheckout.configure({
                    key:'pk_test_cp21BcECf4kMMUbSlRlZlsMo',
                    token : function(token){
                        if(token.id){
                            $("#thankyouPayment").html("Thank you")
                        }
                    }
                })

                $('#customButton').on('click', function(e) {
                    handler.open({
                        name : 'Treasure Train',
                        currency: 'USD',
                        description: 'ticket from '+ $('#from').val() +' to '+$('#to').val() ,
                        amount: $('#price-per-ticket').val() * $('#numOfTickets').val()
                    });

                    $(window).on('popstate', function(){
                        handler.close();
                    });
                });
            });
        </script>



        <!--            SCRIPT FOR FINDING TICKET PRICE-->
        <script>
            function loadTicketClassPrice(){
                // alert("num1")
                // alert(document.getElementById('classOfTicket').value)
                var ticketClass = document.getElementById('classOfTicket').value;
                // alert(ticketClass)
                document.getElementById("price-per-ticket").value = ticketClass.toString()+".0 USD";
                loadTotalPrice();
                // document.getElementById("price-per-ticket").value = "100";

            }
            function loadTotalPrice() {
                // alert("k");
                // alert(document.getElementById('numOfTickets').value;)
                var ticketNum = document.getElementById('numOfTickets').value;
                var ticketClass = document.getElementById('classOfTicket').value;
                document.getElementById("price").value = ticketNum*ticketClass+".0 USD";

            }



            function loadPopup() {
                var FromLocation = document.getElementById('from').value;
                var ToLocation = document.getElementById('to').value;
                var date = document.getElementById('date').value

                var popUpText = "Confirm your booking from " + FromLocation + " to " + ToLocation + " on " + date;

                document.getElementById("confirmation-msg").innerHTML = popUpText;

            }
        </script>



    </div>
</body>

</html>